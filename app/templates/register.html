{% extends "base.html" %}

{% block title %}Crear cuenta{% endblock %}

{% block content %}
  <section class="shell shell--auth">
    <header class="section-header section-header--auth">
      <div>
        <p class="eyebrow">Registro</p>
        <h1 class="headline">Crea tu cuenta</h1>
        <p class="subtle">Organiza apuntes, genera flashcards y estudia con todo en un solo lugar.</p>
      </div>
    </header>

    <div class="card auth-card">
      <div class="auth-card__head">
        <h2>Datos de registro</h2>
        <p class="subtle">Elige un usuario único y una contraseña segura.</p>
      </div>

      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          <ul class="auth-flash">
            {% for category, message in messages %}
              <li class="{{ category }}">{{ message }}</li>
            {% endfor %}
          </ul>
        {% endif %}
      {% endwith %}

      <form method="post" class="auth-form">
        <div>
          <label for="username">Usuario</label>
          <input id="username" name="username" autocomplete="username" required />
        </div>

        <div>
          <label for="password">Contraseña</label>
          <input id="password" name="password" type="password" autocomplete="new-password" required />
        </div>

        <button class="btn-primary auth-submit" type="submit">Crear cuenta</button>
      </form>

      <p class="auth-switch">
        ¿Ya tienes cuenta? <a href="{{ url_for('login') }}">Inicia sesión</a>
      </p>
    </div>
  </section>
  <script>
    // Asegura que la celebración se dispare tras el primer login
    sessionStorage.removeItem("mascotLoginCelebrated");
  </script>
{% endblock %}
